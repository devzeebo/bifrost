<div class="page-header">
  <h1>Runes</h1>
  <p>Manage work items and tasks</p>
</div>

<div class="card">
  <div class="card-header">
    <h2>Filters</h2>
  </div>
  <div class="card-body">
    <form method="get" class="form-inline">
      <div class="form-group">
        <label for="status">Status:</label>
        <select name="status" id="status">
          <option value="">All</option>
          <option value="draft" {{if eq .Data.StatusFilter "draft"}}selected{{end}}>Draft</option>
          <option value="open" {{if eq .Data.StatusFilter "open"}}selected{{end}}>Open</option>
          <option value="claimed" {{if eq .Data.StatusFilter "claimed"}}selected{{end}}>Claimed</option>
          <option value="fulfilled" {{if eq .Data.StatusFilter "fulfilled"}}selected{{end}}>Fulfilled</option>
          <option value="sealed" {{if eq .Data.StatusFilter "sealed"}}selected{{end}}>Sealed</option>
        </select>
      </div>
      <div class="form-group">
        <label for="priority">Priority:</label>
        <select name="priority" id="priority">
          <option value="">All</option>
          <option value="0" {{if eq .Data.PriorityFilter "0"}}selected{{end}}>Unprioritized</option>
          <option value="1" {{if eq .Data.PriorityFilter "1"}}selected{{end}}>Urgent</option>
          <option value="2" {{if eq .Data.PriorityFilter "2"}}selected{{end}}>High</option>
          <option value="3" {{if eq .Data.PriorityFilter "3"}}selected{{end}}>Normal</option>
          <option value="4" {{if eq .Data.PriorityFilter "4"}}selected{{end}}>Low</option>
        </select>
      </div>
      <div class="form-group">
        <label for="assignee">Assignee:</label>
        <input type="text" name="assignee" id="assignee" value="{{.Data.AssigneeFilter}}" placeholder="Username">
      </div>
      <button type="submit" class="btn btn-primary">Filter</button>
      <a href="/admin/runes" class="btn btn-secondary">Clear</a>
    </form>
  </div>
</div>

<div class="card">
  <div class="card-header">
    <h2>Runes ({{len .Data.Runes}})</h2>
  </div>
  <div class="card-body">
    {{if .Data.Runes}}
    <table class="table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Title</th>
          <th>Status</th>
          <th>Priority</th>
          <th>Assignee</th>
          <th>Branch</th>
        </tr>
      </thead>
      <tbody>
        {{range .Data.Runes}}
        <tr>
          <td><a href="/admin/runes/{{.ID}}">{{.ID}}</a></td>
          <td>{{.Title}}</td>
          <td><span class="badge badge-{{.Status}}">{{.Status}}</span></td>
          <td>{{priorityLabel .Priority}}</td>
          <td>{{.Claimant}}</td>
          <td>{{.Branch}}</td>
        </tr>
        {{end}}
      </tbody>
    </table>
    {{else}}
    <p class="text-muted">No runes found</p>
    {{end}}
  </div>
</div>
